<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>공지사항</title>

<link rel="stylesheet" type="text/css" th:href="@{/bootstrap.min.css}">
<link rel="stylesheet" type="text/css" th:href="@{/style.css}">


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
<link
	href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.css"
	rel="stylesheet">
<script
	src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.js"></script>


</head>

<body>

	<h2 class="">게시판 등록</h2>

	<form th:action="@{/board/register_form}" method="post"
		enctype="multipart/form-data">

		<div class="mb-3">
			<label for="subject" class="form-label">제목 </label> <input
				type="text" name="subject" id="subject" class="form-control">
		</div>

		<!-- <div class="mb-3">
			<label for="content" class="form-label">내용 </label>
			<textarea name="content" class="form-control"></textarea>
		</div> -->

		<!-- 에디터로 글쓰기 하는 부분 -->
		<div class="form-group">
			<label for="content">content:</label>
			<textarea class="form-control summernote" rows="5" id="summernote"
				name="content"></textarea>
		</div>


		<input type="submit" value="저장하기" class="btn btn-primary my-2">
	</form>


	<script>
	 $('#summernote').summernote({
		placeholder : "Enter content", //안에 들어갈 내용 미리보기
		focus: true, // 에디터 로딩후 포커스를 맞출지 여부
		lang:"ko-KR", // 한글설정 
		tabsize : 2, 
		height : 300, //높이
		
	
	//콜백 함수
            callbacks : { 
            	onImageUpload : function(files, editor, welEditable) {
            // 파일 업로드(다중업로드를 위해 반복문 사용)
            for (var i = files.length - 1; i >= 0; i--) {
            uploadSummernoteImageFile(files[i],
            this);
            		}
            	}
            }
		
	}); 
	 
	 function uploadSummernoteImageFile(file, el) {
			data = new FormData();
			data.append("file", file);
			$.ajax({
				data : data,
				type : "POST",
				url : "uploadSummernoteImageFile",
				contentType : false,
				enctype : 'multipart/form-data',
				processData : false,
				success : function(data) {
					$(el).summernote('editor.insertImage', data.url);
				}
			});
		}
	 
	
	
	
	
</script>
	<script src="/js/board.js"></script>
	<script th:src="@{/js/bootstrap.min.js}"></script>
</body>
</html>